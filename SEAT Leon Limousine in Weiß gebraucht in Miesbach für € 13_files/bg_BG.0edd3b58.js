const e=(e,t)=>{const n=t.length+1;return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e.substring(0,n)===t+"="})).map((function(e){return decodeURIComponent(e.substring(n))}))[0]||null},t=(e,t)=>{const n=new Date(Date.now()+2592e6);let o=window.location.hostname.split(".");o.length>1&&(o=o.slice(o.length-2)),document.cookie=e+"="+t+"; expires="+n.toUTCString()+"; path=/; domain=."+o.join(".")};const n=t=>{const n=e(t,"sso");return n&&n.trim().length>0?n:null},o=e=>{const t=e.split("."),n=decodeURIComponent(atob(t[1]));return JSON.parse(n)},a=()=>{const e=new RegExp("(?:^|; )User=([^;]*)").exec(document.cookie);return e&&e[1].indexOf("CustomerType=D")>=0?{cty:"D"}:e&&e[1].indexOf("CustomerType=P")>=0?{cty:"P"}:e&&e[1].indexOf("CustomerType=B")>=0?{cty:"B"}:null};const i=(e,t)=>{if(!e)return;const n=t?"block":"none";e.style.display=n},r=(e,t)=>{if(!e)return;const n=t?"inline-block":"none";e.style.display=n},l=(e,t)=>{let n=new RegExp(e+"=([^;]+)"),o=n.exec(document.cookie);return null!=o?(n=new RegExp(t+"=([^&]+)"),o=n.exec(o),null!=o?unescape(o[1]):null):null},c=()=>{if(!window.localStorage)return!1;const e=window.localStorage.getItem("as24-watchlist-client"),t=e?JSON.parse(e):{};return t&&t.state&&t.state.favorites&&t.state.favorites.ids&&t.state.favorites.ids.length>0},s=()=>Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)>=1e3,u=()=>{const e=document.querySelector("[role=navigation]");if(e){return"car-quiz"===e.getAttribute("data-bell-constiation")}return!1};var d=function(e){if(!window.localStorage||!e)return{};return"true"===window.localStorage.getItem(e)},g=function(e,t){window.localStorage&&e&&window.localStorage.setItem(e,t)};const m=()=>{if(window.dataLayer)for(let t=0;t<window.dataLayer.length;t++){var e;if(null===(e=window.dataLayer[t])||void 0===e?void 0:e.common_pageid)return window.dataLayer[t].common_pageid}return null},f=e=>{window.dataLayer=window.dataLayer||[],window.dataLayer.push(e)},v={visibilityEventLabel:"impression",ctaEventLabel:"login",sendNotificationBellImpression:function(){(window.dataLayer||[]).push({common_test_ugaa_154:"impression|notification_bell"})},sendBellClickUnifiedTracking:function(){(window.dataLayer||[]).push({session_loginWays:"topnavmenu_loginnotif|navi"})},sendTrackingEvent:function(e,t,n){f({event:"event_trigger",event_category:e+"-topnavmenuloginnotif",event_action:t,event_label:n})}},p={visibilityEventLabel:"impression",ctaEventLabel:"carquiz",sendNotificationBellImpression:function(){(window.dataLayer||[]).push({common_test_ugaa_861:"impression|notification_bell"})},sendBellClickUnifiedTracking:function(){(window.dataLayer||[]).push({session_carquizWays:"topnavmenu_loginnotif|navi"})},sendTrackingEvent:function(e,t,n){f({event:"event_trigger",event_category:e+"-topnavmenuloginnotif",event_action:t,event_label:n})}},y={visibilityEventLabel:"impression",ctaEventLabel:"homefeed",sendNotificationBellImpression:function(){(window.dataLayer||[]).push({common_test_ugaa_370:"impression|notification_bell"})},sendBellClickUnifiedTracking:function(){(window.dataLayer||[]).push({session_homefeedWays:"topnavmenu_loginnotif|navi"})},sendTrackingEvent:function(e,t,n){f({event:"event_trigger",event_category:e+"-topnavmenuloginnotif",event_action:t,event_label:n})}};const h=e=>{switch(e){case"homefeed":return{tracking:y,storageKey:"seen-home-bell-popup"};case"car-quiz":return{tracking:p,storageKey:"seen-car-quiz-bell-popup"};default:return{tracking:v,storageKey:"seen-bell-popup"}}},w=(e,t)=>{let n=!1,o=!1,a=0;const i=document.querySelector('[data-type="bell-popup"]');if(null===i)return;const r=document.querySelectorAll('[data-type="bell"]');if(!L())return;r.forEach((function(r){r.classList.remove("sc-hidden"),d(t)&&(b(r),n=!0),r.addEventListener("click",(function(){n||(n=!0,b(r),g(t,"true")),o=E(i,!o,e),r.setAttribute("aria-expanded",o.toString()),o?a=Date.now():e.sendTrackingEvent(_(),"timestamp",q(a).toString())}))}));const l=i.querySelector('[data-type="bell-popup-close"]');null==l||l.addEventListener("click",(function(){o=E(i,!1,e),e.sendTrackingEvent(_(),"timestamp",q(a).toString())}));const c=i.querySelector('[data-type="btn-login-bell"]');null==c||c.addEventListener("click",(function(){e.sendTrackingEvent(_(),"click",e.ctaEventLabel),e.sendBellClickUnifiedTracking()})),document.addEventListener("click",(function(t){if(!o)return;let n=!1;r.forEach((function(e){n=n||e.contains(t.target)}));i.contains(t.target)||n||(o=E(i,!1,e),e.sendTrackingEvent(_(),"timestamp",q(a).toString()))})),k(r)&&e.sendNotificationBellImpression()},b=e=>{e.classList.remove("bell-unread"),e.classList.add("bell-read")},_=()=>{const e=window.location.hostname.split(".").pop();switch(e){case"at":return"de-at";case"be":return 0===window.location.pathname.indexOf("/fr/")?"fr-be":"nl-be";case"lu":return"fr-lu";case"de":case"it":case"nl":case"fr":case"es":return e+"-"+e;default:return"en-gb"}},k=e=>{let t=!1;return e.forEach((function(e){t||"none"===e.style.display||(t=!0)})),t},E=(e,t,n)=>{if(!e)return!1;e.style.display=t?"block":"none";const o="login_notif_"+(t?"open":"close");return n.sendTrackingEvent(_(),o,n.visibilityEventLabel),t},S=()=>{const e=document.querySelector("as24-tracking[type=pagename]");return!!e&&"list"===e.getAttribute("pageid")},L=()=>!S()||S()&&!(Math.min(document.documentElement.clientWidth,window.innerWidth||screen.width)<=480),q=e=>(Date.now()-e)/1e3|0;const A=(e,t)=>{switch(e){case"home":return"homepage_"+t;case"list":return"list_page_"+t;case"detail":return"detail_page_"+t;case"mmc-auto-hub":case"mmc-auto-make":case"mmc-auto-model":case"mmc-auto-universal":return"car_catalog_"+t;default:return t}};const T=e=>{let t=!1;const n=e.querySelector(".hfo-mobile-menu");n&&n.addEventListener("click",(function(){t=!t;const e={linkgroup:"topmenu",linkid:t?"open":"close"},n=document.createEvent("CustomEvent");n.initCustomEvent("AS24.tracking.click",!0,!0,e),document.dispatchEvent(n)}))},B=e=>{Array.prototype.forEach.call(e.querySelectorAll("nav a"),(function(e){if("_blank"===e.target)return;const t=e.href;e.addEventListener("click",(function(e){var n,o;let a=null!==(o=null===(n=(()=>{if(window.dataLayer)for(let e=0;e<window.dataLayer.length;e++)if(window.dataLayer[e]&&window.dataLayer[e].common_pageName)return window.dataLayer[e].common_pageName;return null})())||void 0===n?void 0:n.replace(new RegExp("/","g"),"-"))&&void 0!==o?o:"";if(a.length>0){a=a.replace("|","%7C");const n=t.indexOf("?")>-1?"&":"?";window.location.href=t+n+"genlnk=navi&genlnkorigin="+a,e.preventDefault()}}))}))},x=e=>{if(!C())return;const t=e.target.closest("header.hfo-navigation[role=navigation]");if(!t)return void O();const n=e.target.closest("header.hfo-navigation[role=navigation] .hfo-mobile-menu");if(n)return I(n),void N(t,n);const o=e.target.closest("header.hfo-navigation[role=navigation] nav li"),a=e.target.closest("header.hfo-navigation[role=navigation] nav li button");if(o&&a)return I(a),void U(o,a);const i=e.target.closest("header.hfo-navigation[role=navigation] #as24-logo");i&&I(i);const r=e.target.closest("header.hfo-navigation[role=navigation] nav li.open");if(!r)return I(r),void O();const l=e.target.closest("header.hfo-navigation[role=navigation] nav a");return l?(I(l),void O()):void 0},C=()=>null!==document.querySelector("header.hfo-navigation[role=navigation]"),I=e=>{e&&(e.hasAttribute("data-tracking-linkid")&&f({event:"click",common_linkgroup:"topNavMenu",common_linkid:e.getAttribute("data-tracking-linkid")||""}),e.hasAttribute("data-tracking-eventcategory")&&e.hasAttribute("data-tracking-eventaction")&&e.hasAttribute("data-tracking-eventlabel")&&f({event:"event_trigger",event_category:e.getAttribute("data-tracking-eventcategory")||"",event_action:e.getAttribute("data-tracking-eventaction")||"",event_label:e.getAttribute("data-tracking-eventlabel")||""}))},U=(e,t)=>{const n=window.innerWidth>=923,o=Array.prototype.slice.call(document.querySelectorAll("header.hfo-navigation[role=navigation] nav li"));n&&o.forEach((function(t){t!==e&&D(t)})),t.setAttribute("aria-expanded","true"),e.classList.toggle("open")},N=(e,t)=>{t.setAttribute("aria-expanded",e.classList.contains("open").toString()),e.classList.toggle("open")},D=e=>{var t;e.querySelector("button")&&(null===(t=e.querySelector("button"))||void 0===t||t.setAttribute("aria-expanded","false")),e.classList.remove("open")},O=()=>{Array.prototype.slice.call(document.querySelectorAll("header.hfo-navigation[role=navigation] nav li.open")).forEach((function(e){D(e)}))};(()=>{const e=document.querySelector(".hfo-basic .hfo-navigation[role=navigation]");e&&(T(e),B(e),document.addEventListener("click",x))})(),(async()=>{const d=(()=>{const e=n(document.cookie);return e?o(e):a()})(),g=null!==d&&-1===document.location.pathname.indexOf("/logout"),m=g&&"D"===d.cty||window.location.href.includes("loggedInDealer=true")&&window.location.hostname.includes("local"),f=g&&"P"===d.cty,v=g&&"B"===d.cty;if(m){i(document.querySelector('li[data-type="loggedout"]'),!1),i(document.querySelector('li[data-type="loginb2b"]'),!0);const n=document.getElementById("emailb2b");n&&(n.innerHTML=l("User","Name")||""),document.getElementsByClassName("hfo-dealer-navigation").length>0&&(i(document.querySelector('div[class="hfo-basic"]'),!1),i(document.querySelector('div[class="hfo-dealer-navigation"]'),!0),await(async()=>{const n=e(document.cookie,"User")||"",o=new URLSearchParams(n),a={name:"Name",sellId:"SellId",financeBoostEnabled:"FinanceBoostEnabled",showGroupButton:"ShowGroupButton",showMasterCrown:"ShowMasterCrown"},l={name:"companyName",sellId:"sellId",financeBoostEnabled:"isFinanceBoostEnabled",showGroupButton:"isShowGroupButton",showMasterCrown:"isShowMasterCrown"},c=Object.keys(a);if(c.some((e=>!o.has(a[e])))){const e=await fetch("https://www.autoscout24.de/dealer-navigation/api"),t=await e.json();c.forEach((e=>{const n=a[e],i=l[e];o.has(n)||void 0===t[i]||o.set(n,t[i])}))}const s=[];o.forEach(((e,t)=>s.push(`${e}=${encodeURIComponent(t)}`))),t("User",s.join("&").toString());const u=o.get(a.name)||"";if(o.has(a.sellId)){var d;const e=o.get(a.sellId)||"";i(document.querySelector('li[class="hfo-dealer-navigation__user-line__sell-id"]'),!0),null===(d=document.querySelector('li[class="hfo-dealer-navigation__user-line__sell-id"]'))||void 0===d||d.insertAdjacentText("beforeend",e)}var g,m;"true"===o.get(a.showGroupButton)?(null===(g=document.querySelector('span[class="hfo-group-dealer-nav__arrow"]'))||void 0===g||g.insertAdjacentText("beforebegin",u),i(document.querySelector('a[class="hfo-dealer-navigation__user-line__button"]'),!0),"true"===o.get(a.showMasterCrown)&&r(document.querySelector('span[class="group-login-master-crown"]'),!0)):(null===(m=document.querySelector('span[class="hfo-dealer-navigation__user-line__company-name"]'))||void 0===m||m.insertAdjacentText("beforeend",u),i(document.querySelector('span[class="hfo-dealer-navigation__user-line__company-name"]'),!0)),"true"===o.get(a.financeBoostEnabled)&&i(document.querySelector('a[id="financeboost"]'),!0)})())}if(f&&(i(document.querySelector('li[data-type="loggedout"]'),!1),i(document.querySelector('li[data-type="loginb2c"]'),!0)),v&&(i(document.querySelector('li[data-type="loggedout"]'),!1),i(document.querySelector('li[data-type="loginb2c"]'),!0)),g){const e=u();document.querySelectorAll('div[data-type="bell"]').forEach((function(t){i(t,e)})),document.querySelectorAll('div[data-type="sase-bell"]').forEach((function(e){i(e,!u())}))}else{!c()&&s()?(i(document.querySelector('li[data-type="loggedout"]'),!1),i(document.querySelector('li[data-type="big-login"]'),!0)):i(document.querySelector('li[data-type="loggedout"]'),!0);const e=-1===document.cookie.indexOf("culture=de-DE");document.querySelectorAll('div[data-type="bell"]').forEach((function(t){i(t,e)}))}})(),(()=>{const e=document.querySelectorAll('[data-id="okta-login-button"]');let t=m();e.forEach((function(e){const n=e.getAttribute("touch-point");e.addEventListener("click",(()=>{t||(t=m());const e=null===n?"top-navi-cta":A(t,n);document.dispatchEvent(new CustomEvent("AUTH_DIALOG_TYPE_CHANGE_EVENT",{detail:{clientId:"private-myarea",redirectUrl:window.location.href,tp:e}}))}))}))})(),(()=>{const e=document.querySelectorAll('[data-id="okta-logout-button"]'),t=document.cookie.split(";").filter((e=>e.includes("culture=")))[0];let n=window.location.origin;if(t){switch(t.split("=")[1]){case"fr-BE":n+="/fr/entry/logout";break;case"nl-BE":n+="/nl/entry/logout";break;default:n+="/entry/logout"}}else n+="/entry/logout";e.forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation();const t=window.location.href;-1!==t.indexOf("/account")?window.location.href=n:window.location.href=n+"?fwdUrl="+encodeURIComponent(t)}))}))})(),(()=>{const e=document.querySelector(".hfo-basic .hfo-navigation[role=navigation]");if(!e)return;const t=e.getAttribute("data-bell-variation"),n=h(t);w(n.tracking,n.storageKey)})(),document.addEventListener("AUTH_DIALOG_TYPE_CHANGE_EVENT",(function(){const n="have_seen_sp_popup";document.cookie&&!e(document.cookie,n)&&t(n,"false")}));